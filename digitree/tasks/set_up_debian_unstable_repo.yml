---
- name: Set up Debian unstable repository
  become: true
  apt_repository:
    repo: "deb http://deb.debian.org/debian/ unstable main contrib non-free"
    state: present
    filename: "/etc/apt/sources.list.d/unstable.list"

- name: Pin Debian stable packages
  become: true
  debconf:
    name: "apt/preferences"
    question: "apt::default-release"
    value: "stable"
    vtype: "select"

- name: Pin Debian unstable packages
  become: true
  debconf:
    name: "apt/preferences"
    question: "apt::default-release"
    value: "unstable"
    vtype: "select"
  
- name: Update package information
  become: true
  apt:
    update_cache: yes
